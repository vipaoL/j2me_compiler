<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
<HTML LANG="en">
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">
<META NAME="GENERATOR" CONTENT="Adobe FrameMaker 7.0/HTML Export Filter">

<LINK REL="STYLESHEET" HREF="unx_unstr_styles.css" CHARSET="ISO-8859-1" TYPE="text/css">
<META name="dc.title" content="Sun Java Wireless Toolkit for CLDC User's Guide">
<META name="description" content="The Sun Java Wireless Toolkit for CLDC User's Guide describes how to use the wireless toolkit user interface and the emulator. It also describes how various JSRs are implemented in the user interface and discusses many of 
<META name="partnumber" content="&nbsp;">
<META name="date" content="September 2007">
<META name="revision" content="Revision 01">
<TITLE>C H A P T E R  11 - Using the Bluetooth and OBEX APIs
</TITLE>
</HEAD>
<BODY BGCOLOR="#ffffff">
<DIV>
<div class="navbar" align="center">
<table dir="LTR" summary="Navigation bar, includes the book title and navigation buttons" width=100% cellpadding="0" cellspacing="0" border="0"><colgroup span="3" width="100%"><col id="1" span="1" width="1%"><col id="2" span="1" width="69%"><col id="3" span="1" width="30%">
<tr bgcolor="#cccccc"><td>&nbsp;</td>
<td class="navbartitle" align=left rowspan="1" colspan="1" abbr="ChapTitle">Sun Java Wireless Toolkit for CLDC User's Guide
</td>
<td valign="top" align="right" rowspan="1" colspan="1" abbr="NavButtons"><a href="index.html"><img src="shared/toc01.gif" title="Table Of Contents" alt="Table Of Contents" width="30" height="26" border="0"></a><a href="pdap.html"><img src="shared/prev01.gif" title="Previous Chapter" alt="Previous Chapter" width="30" height="26" border="0"></a><a href="webservices.html"><img src="shared/next01.gif" title="Next Chapter" alt="Next Chapter" width="30" height="26" border="0"></a><a href="ix.html"><img src="shared/index01.gif" title="Book Index" alt="Book Index" width="30" height="26" border="0"></a>
</td>
</tr>
</table>
<br>
<br>
</div>
</DIV>
<TABLE DIR="LTR" SUMMARY="Chapter Number" ABBR="ChapNum" WIDTH="100%" BORDER="0">
<COLGROUP SPAN="1" WIDTH="100%"><COL ID="1" SPAN="1">
<TR>
<TD ALIGN="right" CLASS="ChapNumber"><SPAN CLASS="ChapNumPrefix"><A NAME="50626581_pgfId-32016"></A>C H A P T E R  </SPAN>&nbsp;<SPAN CLASS="ChapNumNum">11</SPAN><A NAME="50626581_11459"></A>
</TD>
</TR>
</TABLE>
<TABLE DIR="LTR" SUMMARY="Chapter Title" ABBR="ChapTitle" WIDTH="100%" BORDER="0">
<COLGROUP SPAN="1" WIDTH="100%"><COL ID="1" SPAN="1" WIDTH="100%">
<TR>
<TD ALIGN="right" CLASS="ChapTitle">
<HR SIZE=7 NOSHADE><A NAME="50626581_pgfId-24808"></A><A NAME="50626581_73905"></A>Using the Bluetooth and <A NAME="50626581_marker-26574"></A>OBEX APIs
</TD>
</TR>
</TABLE>
<P CLASS="Paragraph"><A NAME="50626581_pgfId-32044"></A>The Sun Java<SUP CLASS="Superscript">TM</SUP> Wireless Toolkit for CLDC emulator supports <A NAME="50626581_marker-32941"></A>JSR 82, the Java APIs for Bluetooth. The emulator is fully compliant with version 1.1 of the specification, which describes integration with the push registry. JSR 82 includes two independent APIs:
</P>
<UL>
<LI CLASS="Bullet1"><A NAME="50626581_pgfId-32045"></A>The <A NAME="50626581_marker-32950"></A>Bluetooth API provides an interface to Bluetooth wireless networking, including device discovery and data exchange.
</LI>
<P CLASS="Linebreak">
</P>
<LI CLASS="Bullet1"><A NAME="50626581_pgfId-32046"></A>The <A NAME="50626581_marker-32951"></A>OBEX API allows applications to use the Object Exchange (OBEX) protocol over Bluetooth or other communication channels.
</LI>
<P CLASS="Linebreak">
</P>
</UL>
<P CLASS="Paragraph"><A NAME="50626581_pgfId-24822"></A>This chapter describes how the Sun Java<SUP CLASS="Superscript">TM</SUP> Wireless Toolkit for CLDC implements the Bluetooth and OBEX APIs.
</P><H2 CLASS="Head1"><A NAME="50626581_pgfId-32061"></A>
<DIV>
<HR ALIGN=left SIZE=6 WIDTH=15% noshade>
</DIV>11.1	Bluetooth Simulation Environment</H2>
<P CLASS="Paragraph"><A NAME="50626581_pgfId-32065"></A>The Sun Java<SUP CLASS="Superscript">TM</SUP> Wireless Toolkit for CLDC emulator enables you to develop and test application that use Bluetooth without having actual Bluetooth hardware. The toolkit simulates a Bluetooth environment for running emulators. Multiple emulator instances can discover each other and exchange data using the Bluetooth API.
</P>
<P CLASS="Paragraph"><A NAME="50626581_pgfId-32069"></A>For an example, see the documentation of <KBD CLASS="Filename-Command">BluetoothDemo</KBD> in <A HREF="demonstrations.html#50626580_32725" CLASS="XRef">Appendix A</A>.
</P><H2 CLASS="Head1"><A NAME="50626581_pgfId-24917"></A>
<DIV>
<HR ALIGN=left SIZE=6 WIDTH=15% noshade>
</DIV>11.2	OBEX Over Infrared</H2>
<P CLASS="Paragraph"><A NAME="50626581_pgfId-24921"></A>The Sun Java<SUP CLASS="Superscript">TM</SUP> Wireless Toolkit for CLDC implements OBEX transfer over simulated Bluetooth and infrared connections. The simulated infrared connection follows the <A NAME="50626581_marker-26575"></A>IrDA standard (see <KBD CLASS="URL"><A HREF="http://www.irda.org/" CLASS="URL"><A HREF="http://www.irda.org/" CLASS="URL">http://www.irda.org/</A></A>). Simulated infrared transfers can take place between multiple running emulators.</KBD>
</P><H2 CLASS="Head1"><A NAME="50626581_pgfId-24863"></A>
<DIV>
<HR ALIGN=left SIZE=6 WIDTH=15% noshade>
</DIV>11.3	Setting OBEX and Bluetooth Preferences</H2>
<P CLASS="Paragraph"><A NAME="50626581_pgfId-24933"></A>The Sun Java<SUP CLASS="Superscript">TM</SUP> Wireless Toolkit for CLDC enables you to configure the Bluetooth and OBEX simulation environment. Choose Edit &gt; Preferences and select Bluetooth/OBEX to display the following window.
</P>
<P CLASS="FigureCaption-Wide"><A NAME="50626581_pgfId-33498"></A>FIGURE 11-1 	Bluetooth and OBEX Preferences
</P>
<BR><A NAME="50626581_pgfId-40120"></A>
<P CLASS="FigureBox-Wide"><A NAME="50626581_pgfId-32097"></A>
<P><IMG SRC="figures/bluetooth-4.jpg" TITLE="Bluetooth/OBEX preferences with Bluetooth Internal Properties tab selected" ALT="Bluetooth/OBEX preferences with Bluetooth Internal Properties tab selected" ALIGN="BASELINE">
</P><A NAME="50626581_pgfId-40116"></A><A NAME="50626581_pgfId-40119"></A><H3 CLASS="Head2"><A NAME="50626581_pgfId-32128"></A>11.3.1	<A NAME="50626581_marker-32946"></A>OBEX Preferences</H3>
<P CLASS="Paragraph"><A NAME="50626581_pgfId-24959"></A>Devices using IrDA in the real world discover other devices by listening. You can configure how long the Sun Java<SUP CLASS="Superscript">TM</SUP> Wireless Toolkit for CLDC emulator waits to discover another device using the Discovery timeout field in the IrDA OBEX section of the preferences window. Enter a value in milliseconds.
</P>
<P CLASS="Paragraph"><A NAME="50626581_pgfId-25110"></A>At the API level, the discovery timeout value determines how long a call to <KBD CLASS="Filename-Command">Connector.open(&quot;irdaobex://discover...&quot;)</KBD> blocks before it returns or throws an exception.
</P>
<P CLASS="Paragraph"><A NAME="50626581_pgfId-25127"></A>The maximum packet length affects how much data is sent in each packet between emulators. Shorter packet values result in more packets and more packet overhead.
</P><H3 CLASS="Head2"><A NAME="50626581_pgfId-32133"></A>11.3.2	Bluetooth Internal Properties</H3>
<P CLASS="Paragraph"><A NAME="50626581_pgfId-32134"></A>In the Bluetooth section of the preferences window, the Device discovery timeout is the amount of time, in milliseconds, the emulator waits while attempting to locate other devices in the simulated Bluetooth environment.
</P>
<P CLASS="Paragraph"><A NAME="50626581_pgfId-32441"></A>Bluetooth Address of Next Emulator is the Bluetooth address to be assigned to the first emulator instance. Subsequent instances of the emulator receive an automatically generated address.
</P><H3 CLASS="Head2"><A NAME="50626581_pgfId-32135"></A>11.3.3	Bluetooth System Properties</H3>
<P CLASS="Paragraph"><A NAME="50626581_pgfId-32136"></A>The System Properties tab in the Bluetooth section of the preferences contains properties that can be retrieved in an application using the <KBD CLASS="Filename-Command">getProperty()</KBD> method in <KBD CLASS="Filename-Command">javax.bluetooth.LocalDevice</KBD>.
</P>
<P CLASS="Paragraph"><A NAME="50626581_pgfId-32137"></A>The Bluetooth properties are fully described in the JSR 82 specification.
</P><H3 CLASS="Head2"><A NAME="50626581_pgfId-32138"></A>11.3.4	Bluetooth BCC Properties</H3>
<P CLASS="Paragraph"><A NAME="50626581_pgfId-32139"></A>The Bluetooth Control Center (BCC) controls Bluetooth settings. Some devices might provide a GUI to customize Bluetooth settings. In the Sun Java<SUP CLASS="Superscript">TM</SUP> Wireless Toolkit for CLDC, the BCC is configured using the BCC Properties tab of the Bluetooth preferences. The properties are as follows.
</P>
<BR>
<TABLE CLASS="Titled" BORDER="1" BORDERCOLORLIGHT="#FFFFFF" BORDERCOLORDARK="#000000" CELLPADDING="5" CELLSPACING="0" DIR="LTR"><CAPTION CLASS="TableCaption"> <A NAME="50626581_pgfId-32146"> </A> TABLE 11-1 	BCC Properties   </CAPTION>
<THEAD>
<TR>
<TH SCOPE="COL" ROWSPAN="1" COLSPAN="1" BGCOLOR="#CCCCCC">
<P CLASS="TableHead"><A NAME="50626581_pgfId-32150"></A>Property
</P>
</TH>
<TH SCOPE="COL" ROWSPAN="1" COLSPAN="1" BGCOLOR="#CCCCCC">
<P CLASS="TableHead"><A NAME="50626581_pgfId-32152"></A>Description
</P>
</TH>
</TR>
</THEAD>
<TBODY>
<TR>
<TD SCOPE="ROW" ROWSPAN="1" COLSPAN="1">
<P CLASS="TableText"><A NAME="50626581_pgfId-32154"></A>Enable Bluetooth support
</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableText"><A NAME="50626581_pgfId-32156"></A>If this property is disabled, <KBD CLASS="Filename-Command">LocalDevice.getLocalDevice()</KBD> throws a <KBD CLASS="Filename-Command">BluetoothStateException</KBD> and no connections can be created. This is useful to test the behavior of your application on devices that support JSR 82 but might have the Bluetooth feature turned off.
</P>
</TD>
</TR>
<TR>
<TD SCOPE="ROW" ROWSPAN="1" COLSPAN="1">
<P CLASS="TableText"><A NAME="50626581_pgfId-32158"></A>Device is discoverable
</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableText"><A NAME="50626581_pgfId-32160"></A>Indicates whether or not this emulator can be discovered by other emulators.
</P>
</TD>
</TR>
<TR>
<TD SCOPE="ROW" ROWSPAN="1" COLSPAN="1">
<P CLASS="TableText"><A NAME="50626581_pgfId-32162"></A>Friendly name
</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableText"><A NAME="50626581_pgfId-32164"></A>A human-readable name for the emulator in the simulated Bluetooth environment. If the name is left blank, the emulator does not support the friendly name feature.
</P>
</TD>
</TR>
<TR>
<TD SCOPE="ROW" ROWSPAN="1" COLSPAN="1">
<P CLASS="TableText"><A NAME="50626581_pgfId-32166"></A>Encryption
</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableText"><A NAME="50626581_pgfId-32168"></A>Determines whether connection encryption is supported (<KBD CLASS="Filename-Command">on</KBD>) or not (<KBD CLASS="Filename-Command">off</KBD>). In addition, the <KBD CLASS="Filename-Command">force</KBD> settings means all connections must be encrypted. See the documentation for <KBD CLASS="Filename-Command">RemoteDevice</KBD>'s <KBD CLASS="Filename-Command">encrypt()</KBD> method for details.
</P>
</TD>
</TR>
<TR>
<TD SCOPE="ROW" ROWSPAN="1" COLSPAN="1">
<P CLASS="TableText"><A NAME="50626581_pgfId-32170"></A>Authorization
</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableText"><A NAME="50626581_pgfId-32172"></A>Similar to the Encryption property. See <KBD CLASS="Filename-Command">RemoteDevice</KBD>'s <KBD CLASS="Filename-Command">authorize()</KBD> method.
</P>
</TD>
</TR>
<TR>
<TD SCOPE="ROW" ROWSPAN="1" COLSPAN="1">
<P CLASS="TableText"><A NAME="50626581_pgfId-32174"></A>Authentication
</P>
</TD>
<TD ROWSPAN="1" COLSPAN="1">
<P CLASS="TableText"><A NAME="50626581_pgfId-32176"></A>Similar to Encryption and Authorization. See <KBD CLASS="Filename-Command">RemoteDevice</KBD>'s <KBD CLASS="Filename-Command">authenticate()</KBD> method.
</P>
</TD>
</TR>
</TBODY>
</TABLE>
<BR>
<P CLASS="Paragraph"><A NAME="50626581_pgfId-32366"></A>&nbsp;
</P>
<div class="navbar" align="center">
<br>
<br>
<table dir="LTR" summary="Navigation bar, includes the book title and navigation buttons" width=100% cellpadding="0" cellspacing="0" border="0"><colgroup span="4" width="100%"><col id="1" span="1" width="1%"><col id="2" span="1" width="69%"><col id="3" span="1" width="1%"><col id="4" span="1" width="29%">
<tr bgcolor="#cccccc"><td>&nbsp;</td>
<td class="navbartitle" align=left rowspan="1" colspan="1" abbr="ChapTitle">Sun Java Wireless Toolkit for CLDC User's Guide
</td>
<td class="navbartitle" align=right rowspan="1" colspan="1" abbr="PartNum">&nbsp;
</td>
<td valign="top" align="right" rowspan="1" colspan="1" abbr="NavButtons"><a href="index.html"><img src="shared/toc01.gif" title="Table Of Contents" alt="Table Of Contents" width="30" height="26" border="0"></a><a href="pdap.html"><img src="shared/prev01.gif" title="Previous Chapter" alt="Previous Chapter" width="30" height="26" border="0"></a><a href="webservices.html"><img src="shared/next01.gif" title="Next Chapter" alt="Next Chapter" width="30" height="26" border="0"></a><a href="ix.html"><img src="shared/index01.gif" title="Book Index" alt="Book Index" width="30" height="26" border="0"></a>
</td>
</tr>
</table>
<br>
<br>
</div>
<P CLASS="copyrightlink"><A HREF="copyright.html">Copyright</a> &#169; 2007, Sun Microsystems, Inc.   All Rights Reserved.</P>
</BODY>
</HTML>
